@model IEnumerable<Appointment>

@section Scripts {
    <script>
        document.getElementById("searchInput").addEventListener("input", function () {
            var searchValue = this.value.toLowerCase();
            var rows = document.querySelectorAll("#appointmentTable tbody tr");

            rows.forEach(function (row) {
                var display = [...row.children].some(function (cell) {
                    return cell.textContent.toLowerCase().includes(searchValue);
                });

                row.style.display = display ? "" : "none";
            });
        });
    </script>
}

<div class="d-flex justify-content-between align-items-center pt-3">
    <div>
        <input type="text" id="searchInput" class="form-control" placeholder="Search...">
    </div>
    
    <div>
        <a asp-controller="Home" asp-action="Create" class="btn btn-primary">Create New Appointment</a>
        <a asp-controller="Home" asp-action="Logout" class="btn btn-danger ml-2">Logout</a>
    </div>
</div>

        <br />
    @if (Model != null && Model.Count() > 0)
    {
        <table id="appointmentTable" class="table table-bordered table-hover table-striped" width="100%">
            <thead>
                <tr>
                    <th>Appointment Id</th>
                    <th>Customer Name</th>
                    <th>Appointment Type</th>
                    <th>Customer Phone</th>
                    <th>Start</th>
                    <th>End</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach(var item in Model)
                {
                    <tr>
                        <td width="10%">@item.appointmentId</td>
                        <td width="10%">@item.customerName</td>
                        <td width="10%">@item.appointmentType</td>
                        <td width="10%">@item.customerPhone</td>
                        <td width="10%">@item.appointmentStart</td>
                        <td width="10%">@item.appointmentEnd</td>
                        <td width="5%">
                            <div class="w-100 btn-group" role="group">
                                <a asp-controller="Home" asp-action="Edit" asp-route-Id="@item.appointmentId"
                                class="btn btn-primary mx-1">Edit</a>
                                <a asp-controller="Home" asp-action="Delete" asp-route-Id="@item.appointmentId"
                                   class="btn btn-danger">Delete</a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    <div class="mx-2 d-inline-block">
        <a asp-controller="Home" asp-action="YearlyReport" asp-route-reportType="Yearly" class="btn btn-primary">Generate This Year's Appointments Report</a>
    </div>
    <div class="mx-2 d-inline-block">
        <a asp-controller="Home" asp-action="MonthlyReport" asp-route-reportType="Monthly" class="btn btn-primary">Generate This Month's Appointments Report</a>
    </div>  
    }else
    {
        <br />
        <p><b>No Records Found</b></p>
    }

